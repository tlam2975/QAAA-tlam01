<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEU Project Hub - H·ªá th·ªëng qu·∫£n l√Ω d·ª± √°n sinh vi√™n</title>
    <link rel="stylesheet" href="project/view/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="icon" type="image/png" href="project/view/favicon_io/favicon-32x32.png">
    <link rel="stylesheet" href="/css/main.css">

</head>

<body>
    <header class="header">
        <div class="nav-container">
            <div class="logo">
                <img src="project/view/logo.png" alt="NEU Logo">
                <h1>NEU Project Hub</h1>
            </div>
            <div class="user-info">
                <div class="user-avatar">SV</div>
                <span id="userName">Sinh vi√™n NEU</span>
            </div>
        </div>
    </header>

    <main class="main-container">
        <section class="welcome-section">
            <h2>üöÄ Ch√†o m·ª´ng ƒë·∫øn v·ªõi NEU Project Hub</h2>
            <p>N·ªÅn t·∫£ng qu·∫£n l√Ω d·ª± √°n c√° nh√¢n d√†nh cho sinh vi√™n ƒê·∫°i h·ªçc Kinh t·∫ø Qu·ªëc d√¢n.
                T·∫°o d·ª± √°n, ph√¢n t√≠ch d·ªØ li·ªáu, tr·ª±c quan h√≥a th√¥ng tin v√† chia s·∫ª nghi√™n c·ª©u c·ªßa b·∫°n.</p>
            <div class="action-buttons">
                <button class="btn btn-primary" onclick="openCreateModal()">
                    <i class="fas fa-plus"></i>
                    T·∫°o d·ª± √°n m·ªõi
                </button> <a href="project/view/tracuu.html" class="btn btn-secondary">
                    <i class="fas fa-database"></i>
                    Tra c·ª©u d·ªØ li·ªáu
                </a>
                <a href="project-templates.html" class="btn btn-secondary">
                    <i class="fas fa-templates"></i>
                    M·∫´u d·ª± √°n
                </a>
            </div>
        </section>

        <section class="projects-section">
            <div class="section-header">
                <h3><i class="fas fa-folder-open"></i> D·ª± √°n c·ªßa t√¥i</h3>
                <span id="projectCount">0 d·ª± √°n</span>
            </div>

            <div id="projectsContainer">
                <div class="empty-state">
                    <i class="fas fa-folder-open"></i>
                    <h4>Ch∆∞a c√≥ d·ª± √°n n√†o</h4>
                    <p>H√£y b·∫Øt ƒë·∫ßu b·∫±ng c√°ch t·∫°o d·ª± √°n ƒë·∫ßu ti√™n c·ªßa b·∫°n</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Modal t·∫°o d·ª± √°n m·ªõi -->
    <div id="createProjectModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h4><i class="fas fa-plus-circle"></i> T·∫°o d·ª± √°n m·ªõi</h4>
                <span class="close" onclick="closeCreateModal()">&times;</span>
            </div>
            <form id="createProjectForm">
                <div class="form-group">
                    <label for="projectTitle">T√™n d·ª± √°n *</label>
                    <input type="text" id="projectTitle" name="title" required placeholder="Nh·∫≠p t√™n d·ª± √°n c·ªßa b·∫°n">
                </div>

                <div class="form-group">
                    <label for="projectDescription">M√¥ t·∫£ d·ª± √°n</label>
                    <textarea id="projectDescription" name="description"
                        placeholder="M√¥ t·∫£ ng·∫Øn g·ªçn v·ªÅ d·ª± √°n c·ªßa b·∫°n"></textarea>
                </div>

                <div class="form-group">
                    <label for="projectCategory">Danh m·ª•c</label>
                    <select id="projectCategory" name="category">
                        <option value="research">Nghi√™n c·ª©u</option>
                        <option value="analysis">Ph√¢n t√≠ch d·ªØ li·ªáu</option>
                        <option value="survey">Kh·∫£o s√°t</option>
                        <option value="report">B√°o c√°o</option>
                        <option value="other">Kh√°c</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="projectTemplate">M·∫´u d·ª± √°n</label>
                    <select id="projectTemplate" name="template">
                        <option value="blank">D·ª± √°n tr·ªëng</option>
                        <option value="data-analysis">Ph√¢n t√≠ch d·ªØ li·ªáu sinh vi√™n</option>
                        <option value="course-survey">Kh·∫£o s√°t m√¥n h·ªçc</option>
                        <option value="academic-research">Nghi√™n c·ª©u h·ªçc thu·∫≠t</option>
                    </select>
                </div>

                <div class="action-buttons">
                    <button type="button" class="btn btn-secondary" onclick="closeCreateModal()">
                        H·ªßy
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-rocket"></i>
                        T·∫°o d·ª± √°n
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // D·ªØ li·ªáu m·∫´u cho c√°c d·ª± √°n
        let projects = JSON.parse(localStorage.getItem('neuProjects')) || [];

        // Hi·ªÉn th·ªã danh s√°ch d·ª± √°n
        function displayProjects() {
            const container = document.getElementById('projectsContainer');
            const countElement = document.getElementById('projectCount');

            if (projects.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-folder-open"></i>
                        <h4>Ch∆∞a c√≥ d·ª± √°n n√†o</h4>
                        <p>H√£y b·∫Øt ƒë·∫ßu b·∫±ng c√°ch t·∫°o d·ª± √°n ƒë·∫ßu ti√™n c·ªßa b·∫°n</p>
                    </div>
                `;
                countElement.textContent = '0 d·ª± √°n';
                return;
            }

            countElement.textContent = `${projects.length} d·ª± √°n`;

            const projectsHTML = projects.map(project => `
                <div class="project-card">
                    <div class="project-header">
                        <div>
                            <div class="project-title">${project.title}</div>
                            <div class="project-status ${project.status === 'active' ? 'status-active' : 'status-draft'}">
                                ${project.status === 'active' ? 'ƒêang th·ª±c hi·ªán' : 'B·∫£n nh√°p'}
                            </div>
                        </div>
                    </div>
                    <div class="project-description">${project.description || 'Ch∆∞a c√≥ m√¥ t·∫£'}</div>
                    <div class="project-stats">
                        <span><i class="fas fa-calendar"></i> ${formatDate(project.createdAt)}</span>
                        <span><i class="fas fa-tag"></i> ${getCategoryName(project.category)}</span>
                    </div>
                    <div class="project-actions">
                        <button class="btn btn-primary btn-small" onclick="openProject('${project.id}')">
                            <i class="fas fa-folder-open"></i> M·ªü
                        </button>
                        <button class="btn btn-secondary btn-small" onclick="deleteProject('${project.id}')">
                            <i class="fas fa-trash"></i> X√≥a
                        </button>
                    </div>
                </div>
            `).join('');

            container.innerHTML = `<div class="projects-grid">${projectsHTML}</div>`;
        }

        // M·ªü modal t·∫°o d·ª± √°n
        function openCreateModal() {
            document.getElementById('createProjectModal').style.display = 'block';
        }

        // ƒê√≥ng modal t·∫°o d·ª± √°n
        function closeCreateModal() {
            document.getElementById('createProjectModal').style.display = 'none';
            document.getElementById('createProjectForm').reset();
        }

        // X·ª≠ l√Ω form t·∫°o d·ª± √°n
        document.getElementById('createProjectForm').addEventListener('submit', function (e) {
            e.preventDefault();

            const formData = new FormData(e.target);
            const project = {
                id: generateId(),
                title: formData.get('title'),
                description: formData.get('description'),
                category: formData.get('category'),
                template: formData.get('template'),
                status: 'draft',
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString(),
                data: [],
                notes: [],
                charts: []
            };

            projects.push(project);
            localStorage.setItem('neuProjects', JSON.stringify(projects));

            closeCreateModal();
            displayProjects();

            // Chuy·ªÉn ƒë·∫øn trang d·ª± √°n m·ªõi
            setTimeout(() => {
                openProject(project.id);
            }, 500);
        });

        // M·ªü d·ª± √°n
        function openProject(projectId) {
            localStorage.setItem('currentProjectId', projectId);
            window.location.href = 'project-workspace.html';
        }

        // X√≥a d·ª± √°n
        function deleteProject(projectId) {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a d·ª± √°n n√†y?')) {
                projects = projects.filter(p => p.id !== projectId);
                localStorage.setItem('neuProjects', JSON.stringify(projects));
                displayProjects();
            }
        }        // Hi·ªÉn th·ªã m·∫´u d·ª± √°n
        function showTemplates() {
            window.location.href = 'project-templates.html';
        }

        // Utility functions
        function generateId() {
            return 'proj_' + Math.random().toString(36).substr(2, 9) + '_' + Date.now();
        }

        function formatDate(dateString) {
            return new Date(dateString).toLocaleDateString('vi-VN');
        }

        function getCategoryName(category) {
            const categories = {
                research: 'Nghi√™n c·ª©u',
                analysis: 'Ph√¢n t√≠ch d·ªØ li·ªáu',
                survey: 'Kh·∫£o s√°t',
                report: 'B√°o c√°o',
                other: 'Kh√°c'
            };
            return categories[category] || 'Kh√°c';
        }

        // ƒê√≥ng modal khi click b√™n ngo√†i
        window.onclick = function (event) {
            const modal = document.getElementById('createProjectModal');
            if (event.target === modal) {
                closeCreateModal();
            }
        }

        // Kh·ªüi t·∫°o trang
        document.addEventListener('DOMContentLoaded', function () {
            displayProjects();

            // T·∫°o d·ªØ li·ªáu m·∫´u n·∫øu ch∆∞a c√≥
            if (projects.length === 0) {
                const sampleProjects = [
                    {
                        id: 'sample_1',
                        title: 'Ph√¢n t√≠ch ƒëi·ªÉm s·ªë sinh vi√™n kh√≥a 2023',
                        description: 'Nghi√™n c·ª©u xu h∆∞·ªõng ƒëi·ªÉm s·ªë v√† t·ª∑ l·ªá ƒë·ªó/r·ªõt c·ªßa sinh vi√™n NEU',
                        category: 'analysis',
                        template: 'data-analysis',
                        status: 'active',
                        createdAt: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(),
                        updatedAt: new Date().toISOString(),
                        data: [],
                        notes: [],
                        charts: []
                    },
                    {
                        id: 'sample_2',
                        title: 'Kh·∫£o s√°t m·ª©c ƒë·ªô h√†i l√≤ng v·ªÅ d·ªãch v·ª• th∆∞ vi·ªán',
                        description: 'Thu th·∫≠p √Ω ki·∫øn sinh vi√™n v·ªÅ ch·∫•t l∆∞·ª£ng d·ªãch v·ª• th∆∞ vi·ªán tr∆∞·ªùng',
                        category: 'survey',
                        template: 'course-survey',
                        status: 'draft',
                        createdAt: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString(),
                        updatedAt: new Date().toISOString(),
                        data: [],
                        notes: [],
                        charts: []
                    }
                ];

                projects = sampleProjects;
                localStorage.setItem('neuProjects', JSON.stringify(projects));
                displayProjects();
            }
        });
    </script>
</body>

</html>